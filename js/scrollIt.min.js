// (function(e){"use strict";var t="ScrollIt",n="1.0.3";var r={upKey:38,downKey:40,easing:"linear",scrollTime:600,activeClass:"active",onPageChange:null,topOffset:0};e.scrollIt=function(t){var n=e.extend(r,t),i=0,s=e("[data-scroll-index]:last").attr("data-scroll-index");var o=function(t){if(t<0||t>s)return;var r=e("[data-scroll-index="+t+"]").offset().top+n.topOffset+1;e("html,body").animate({scrollTop:r,easing:n.easing},n.scrollTime)};var u=function(t){var n=e(t.target).closest("[data-scroll-nav]").attr("data-scroll-nav")||e(t.target).closest("[data-scroll-goto]").attr("data-scroll-goto");o(parseInt(n))};var a=function(t){var r=t.which;if(e("html,body").is(":animated")&&(r==n.upKey||r==n.downKey)){return false}if(r==n.upKey&&i>0){o(parseInt(i)-1);return false}else if(r==n.downKey&&i<s){o(parseInt(i)+1);return false}return true};var f=function(t){if(n.onPageChange&&t&&i!=t)n.onPageChange(t);i=t;e("[data-scroll-nav]").removeClass(n.activeClass);e("[data-scroll-nav="+t+"]").addClass(n.activeClass)};var l=function(){var t=e(window).scrollTop();var r=e("[data-scroll-index]").filter(function(r,i){return t>=e(i).offset().top+n.topOffset&&t<e(i).offset().top+n.topOffset+e(i).outerHeight()});var i=r.first().attr("data-scroll-index");f(i)};e(window).on("scroll",l).scroll();e(window).on("keydown",a);e("body").on("click","[data-scroll-nav], [data-scroll-goto]",function(e){e.preventDefault();u(e)})}})(jQuery)

(function($) {
    "use strict";

    var pluginName = "ScrollIt",
        pluginVersion = "1.0.3";

    // Default settings
    var defaults = {
        upKey: 38, // key code for up arrow
        downKey: 40, // key code for down arrow
        easing: "linear", // easing function for scrolling
        scrollTime: 600, // duration of scrolling in milliseconds
        activeClass: "active", // class to add to the active nav element
        onPageChange: null, // callback function for page change
        topOffset: 0 // offset from the top
    };

    $.scrollIt = function(options) {
        var settings = $.extend(defaults, options);
        var currentIndex = 0;
        var maxIndex = $("[data-scroll-index]:last").attr("data-scroll-index");

        var scrollTo = function(index) {
            if (index < 0 || index > maxIndex) return;

            var targetTop = $("[data-scroll-index=" + index + "]").offset().top + settings.topOffset + 1;
            $("html, body").animate({ scrollTop: targetTop, easing: settings.easing }, settings.scrollTime);
        };

        var handleClick = function(event) {
            var targetIndex = $(event.target).closest("[data-scroll-nav]").attr("data-scroll-nav") || 
                              $(event.target).closest("[data-scroll-goto]").attr("data-scroll-goto");
            scrollTo(parseInt(targetIndex));
        };

        var handleKeydown = function(event) {
            var key = event.which;
            if ($("html, body").is(":animated") && (key == settings.upKey || key == settings.downKey)) {
                return false;
            }
            if (key == settings.upKey && currentIndex > 0) {
                scrollTo(parseInt(currentIndex) - 1);
                return false;
            } else if (key == settings.downKey && currentIndex < maxIndex) {
                scrollTo(parseInt(currentIndex) + 1);
                return false;
            }
            return true;
        };

        var updateActiveNav = function(index) {
            if (settings.onPageChange && index && currentIndex != index) {
                settings.onPageChange(index);
            }
            currentIndex = index;
            $("[data-scroll-nav]").removeClass(settings.activeClass);
            $("[data-scroll-nav=" + index + "]").addClass(settings.activeClass);
        };

        var onScroll = function() {
            var scrollTop = $(window).scrollTop();
            var sections = $("[data-scroll-index]").filter(function(i, element) {
                return scrollTop >= $(element).offset().top + settings.topOffset && 
                       scrollTop < $(element).offset().top + settings.topOffset + $(element).outerHeight();
            });
            var newIndex = sections.first().attr("data-scroll-index");
            updateActiveNav(newIndex);
        };

        $(window).on("scroll", onScroll).scroll();
        $(window).on("keydown", handleKeydown);
        $("body").on("click", "[data-scroll-nav], [data-scroll-goto]", function(event) {
            event.preventDefault();
            handleClick(event);
        });
    };

})(jQuery);
